{%extends 'inventory/base.html'%}

{% load crispy_forms_tags%}

{% block content %}


    <div class="row">
        <div class="col-11 col-md-4 mx-auto mt-5">
            <h1>Isssue Out Item</h1>
            <form method="post">
                {% csrf_token%}
                {{ form|crispy }}
          
            <div class="mt-3">
                <button class="btn btn-primary">Issue Out Item</button>
            </div>
        </form>
    
    
        </div>




        <script>
            document.addEventListener("DOMContentLoaded", function () {
                 const inventorySelect = document.getElementById("inventory-item");
                const quantityInput = document.getElementById("quantity");
        
                inventorySelect.addEventListener("change", function () {
                    const inventoryId = inventorySelect.value;
        
                    if (inventoryId) {
                        fetch(`/get_inventory-quantity/${inventoryId}/`)
                            .then(response => response.json())
                            .then(data => {
                                quantityInput.setAttribute("max", data.quantity);
                                quantityInput.placeholder = `Max: ${data.quantity}`;
                            })
                            .catch(error => console.error("Error fetching quantity:", error));
                    } else {
                        quantityInput.value = "";
                        quantityInput.removeAttribute("max");
                    }
                });
            });
        </script>


{% endblock content %}